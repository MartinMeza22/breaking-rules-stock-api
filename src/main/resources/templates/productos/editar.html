<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Editar producto</title>
    <style>
        body {
            background: #0f172a;
            color: white;
            font-family: Inter, sans-serif;
            padding: 40px;
        }

        .card {
            max-width: 500px;
            margin: auto;
            background: #1e293b;
            padding: 20px;
            border-radius: 12px;
        }

        input, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            background: #020617;
            border: 1px solid #334155;
            border-radius: 6px;
            color: white;
        }

        input[readonly] {
            background: #1e293b;
            color: #9ca3af;
        }

        button {
            background: white;
            border: none;
            padding: 10px;
            border-radius: 6px;
            font-weight: bold;
        }

        a { color: #9ca3af; display:block; margin-top:10px;}
        .barcode-container {
            text-align: center;
            margin: 10px 0;
        }
        .barcode-container img {
            width: 200px;
        }
        .barcode-container div {
            color: white;
            font-size: 0.8rem;
            margin-top: 4px;
        }
    </style>
</head>
<body>

<div class="card">
    <h3>✏️ Editar producto</h3>

    <form th:action="@{/web/productos/actualizar/{id}(id=${producto.id})}" th:object="${producto}" method="post">
        <input type="hidden" th:field="*{id}"/>

        <input th:field="*{sku}" placeholder="Código interno" readonly/>
        <div class="text-danger" th:if="${#fields.hasErrors('sku')}" th:errors="*{sku}"></div>
        <input th:field="*{codigoBarras}" placeholder="Código de barras" readonly/>

        <!-- Mostrar la imagen del código de barras -->
        <div class="barcode-container">
            <img th:src="@{'/barcodes/' + ${producto.sku} + '.png'}" alt="Código de barras"/>
            <div th:text="${producto.codigoBarras}"></div>
        </div>

        <input th:field="*{nombre}" placeholder="Nombre">
        <div class="text-danger" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></div>
        <input th:field="*{categoria}" placeholder="Categoría">
        <div class="text-danger" th:if="${#fields.hasErrors('categoria')}" th:errors="*{categoria}"></div>
        <input th:field="*{color}" placeholder="Color">
        <div class="text-danger" th:if="${#fields.hasErrors('color')}" th:errors="*{color}"></div>

        <select th:field="*{talle}">
            <option th:each="t : ${talles}" th:value="${t}" th:text="${t}"></option>
        </select>

        <input type="number" step="0.01" th:field="*{precioVenta}" placeholder="Precio">
        <div class="text-danger" th:if="${#fields.hasErrors('precioVenta')}" th:errors="*{precioVenta}"></div>

        <input type="number" th:field="*{stock}" placeholder="Stock">
        <div class="text-danger" th:if="${#fields.hasErrors('stock')}" th:errors="*{stock}"></div>

        <button type="submit">Guardar cambios</button>
    </form>

    <a th:href="@{/web/productos}">← Volver</a>
</div>

</body>
</html>